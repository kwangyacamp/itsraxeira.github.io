<!DOCTYPE html>
<html>

<head>
    <meta charset=utf-8 />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NPA Web</title>

    <!-- Material Design Theming -->
    <link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.orange-indigo.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <script defer src="https://code.getmdl.io/1.1.3/material.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <link rel="stylesheet" href="main.css">

    <script type="text/javascript">
        function initApp() {
            document.getElementById('do-login').addEventListener('click', login, false);
        }

        window.onload = function () {
            initApp();
        };

        const expectedPassword = "nordenium"

        var secretsByClanName = {
            "01xs922ufw" : [
                "Choi",
                "Hyun",
                "Li"
            ],
            "29wd20kk3f" : [
                "Park",
                "Kim",
                "Lau"
            ],
            "281jd2x0pa" : [
                "Na",
                "Bong",
                "Sun"
            ]
        }

        function findKey(name, set) {
            for (const [key, value] of Object.entries(set)) {
                if (value.includes(name)) return key; 
            }
        }

        var secretsPerAcademy = {
            "nordenium" : "https://hosting.photobucket.com/images/i/Nordenium/1.png?width=1920&height=1080&fit=bounds",
            "sydenium" : "https://hosting.photobucket.com/images/i/Nordenium/2.png?width=1920&height=1080&fit=bounds",
            "ostenium" : "https://hosting.photobucket.com/images/i/Nordenium/3.png?width=1920&height=1080&fit=bounds",
            "vestenium" : "https://hosting.photobucket.com/images/i/Nordenium/4.png?width=1920&height=1080&fit=bounds"
        }

        /**
         * Handles the sign up button press.
         */
        function login() {
            var name = document.getElementById('name').value;
            var password = document.getElementById('password').value;
            var academy = document.getElementById('academy').value.toLowerCase();

            if (password === expectedPassword) {
                window.location.replace(secretsPerAcademy[academy])
            }
        }

        function loadAssets(academy) {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    document.getElementById("content").innerHTML = this.responseText;
                }
            };
            xhttp.open("GET", secretsPerAcademy[academy], true);
            xhttp.send();
        }
    </script>
</head>

<body>
    <div id="content"
        class="demo-layout mdl-layout mdl-js-layout mdl-layout--fixed-header">

        <main class="mdl-layout__content mdl-color--grey-100">
            <div class="mdl-cell mdl-cell--12-col mdl-cell--12-col-tablet mdl-grid">

                <!-- Container for the demo -->
                <div class="mdl-card mdl-shadow--2dp mdl-cell mdl-cell--12-col mdl-cell--12-col-tablet mdl-cell--12-col-desktop">
                    <div class="mdl-card__title mdl-color--light-blue-600 mdl-color-text--white">
                        <h2 class="mdl-card__title-text">Unauthorized, please login</h2>
                    </div>
                    <div class="mdl-card__supporting-text mdl-color-text--grey-600">
                        <p>Enter an email and password below and either sign in to an existing account or sign up</p>

                        <input id="academy"
                            class="mdl-textfield__input" style="display:inline;width:auto;" type="text" name="academy" placeholder="Academy" />
                        <br /><br />
                        <input id="name"
                            class="mdl-textfield__input" style="display:inline;width:auto;" type="text" name="name" placeholder="Your Name" />
                        <br /><br />
                        <input id="password" 
                            class="mdl-textfield__input" style="display:inline;width:auto;" type="password" name="password" placeholder="Password" />
                        <br /><br />
                        <button id="do-login"
                            class="mdl-button mdl-js-button mdl-button--raised" name="signup">Login</button>
                    </div>
                </div>

            </div>
        </main>
    </div>
</body>

</html>